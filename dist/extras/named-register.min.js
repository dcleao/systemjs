!function(t){let e;const i=t.System;u(i);const n=i.constructor.prototype,s=n._init;n._init=function(){s.call(this),u(this)};const r=n.register;n.register=function(t,i,n){if("string"!=typeof t)return r.apply(this,arguments);const s=[i,n];return this.registerRegistry[t]=s,e||(e=s,setTimeout(function(){e=null})),r.apply(this,arguments)};const o=n.resolve;n.resolve=function(t,e){try{return o.call(this,t,e)}catch(e){if(t in this.registerRegistry)return t;throw e}};const c=n.instantiate;n.instantiate=function(t,e){const i=this.registerRegistry[t];return i?(this.registerRegistry[t]=null,i):c.call(this,t,e)};const l=n.getRegister;function u(t){t.registerRegistry=Object.create(null)}n.getRegister=function(){const t=l.call(this),i=e||t;return e=null,i}}("undefined"!=typeof self?self:global);